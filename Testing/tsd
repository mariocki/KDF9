export TSD=${DIRECTOR:-Binary/KKT40E007UPU}
cp FW0 FW0_copy

cp FW0_for_Director FW0

mode=-d$1
miscellany=-m$2

if [ "$mode" = "-d" ]
then
        ee9 -sb -df  "$miscellany" -TRkk -TPll  +${TSD};
elif [ $mode = -df ]
then
   time ee9 -sb -df  "$miscellany" -TRkk -TPll  +${TSD};
elif [ $miscellany = -m ]
then
        ee9 -sb "$mode" -TRkk -TPll  +${TSD};
else
        ee9 -sb "$mode" "$miscellany"  -TRkk -TPll +${TSD};
fi

cp FW0_copy FW0

case $3 in
   *z*)
      # Do not display output in silent mode.
      ;;
   *)
      if [ -s CP0 ]
      then
         echo
         echo CP0:
         echo ===
         more CP0
         echo ===
      fi

      if [ -s TP0 ]
      then
         echo
         echo TP0:
         echo ===
         more TP0
         echo ===
      fi

      if [ -s LP0 ]
      then
         echo
         echo LP0:
         echo ===
         more LP0
         echo ===
      fi
esac

if [ x"$mode"x = x-dxx ]
then
   echo The full external trace is in:
   ls -l trace.txt
   echo
fi
