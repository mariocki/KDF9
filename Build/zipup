# This file is part of ee9 (V8), the GNU Ada emulator of the English Electric KDF9.
# Copyright (C) 2021, W. Findlay; all rights reserved.
#
# The ee9 system is free software; you can redistribute it and/or
# modify it under terms of the GNU General Public License as published
# by the Free Software Foundation; either version 3, or (at your option)
# any later version. This program is distributed in the hope that it
# will be useful, but WITHOUT ANY WARRANTY; without even the implied
# warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the GNU General Public License for more details. You should have
# received a copy of the GNU General Public License distributed with
# this program; see file COPYING. If not, see <http://www.gnu.org/licenses/>.

OS=${1:-macOS}

./tidy ${OS}

name=`echo V*p*`_for_${OS}
echo
echo Creating: ${name}.zip

rm -f ${name}.zip
cd ../..

case ${OS} in
UNIX|Unix|unix|LINUX|Linux|linux)
   tar -c -f ${name}.tar emulation; gzip -c ${name}.tar > ${name}.tar.gz; rm ${name}.tar
   echo; ls -la ${name}.tar.gz
   ;;
macOS|Macintosh|Mac|OSX|[Ww]indows|WINDOWS)
   zip -q -r ${name}.zip emulation
   echo; ls -la ${name}.zip
   ;;
*)
   echo Invalid target OS parameter \"$1\"!
   exit 2
   ;;
esac
